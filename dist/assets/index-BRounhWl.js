import{c as Ne,r as a,W as Pt,X as f,b as Ft,g as Ke,Y as At,j as n,f as lt,h as pt,Z as Ct,e as Ue,m as kt,_ as Ot,$ as _t,a0 as St,p as Le,a1 as It,H as Ye,B as Pe,a2 as zt,Q as Fe,a3 as L,P as Tt,T as Q,a4 as Rt,a5 as Mt,a6 as Lt,a7 as Bt,a8 as $t,a9 as Nt,q as Kt,y as qe,aa as W,M as Ve,F as De,s as Ut}from"./index-C-fOiTDS.js";import{L as Yt,T as I,C as Gt,I as Ht,A as Wt}from"./AdminProtectedBodyLayout-v7h0Ove1.js";import{I as qt,l as Vt}from"./lodash-BGNMX9i0.js";import{A as Xt}from"./ActionIcon-9-7eHrK-.js";import{I as Zt}from"./IconSearch-bGmx5SQG.js";import{I as Qt,a as Jt}from"./IconChevronUp-D0jfuCgD.js";function Xe(e){return typeof e!="string"?"":e.charAt(0).toUpperCase()+e.slice(1)}/**
 * @license @tabler/icons-react v3.21.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var er=Ne("outline","file-spreadsheet","IconFileSpreadsheet",[["path",{d:"M14 3v4a1 1 0 0 0 1 1h4",key:"svg-0"}],["path",{d:"M17 21h-10a2 2 0 0 1 -2 -2v-14a2 2 0 0 1 2 -2h7l5 5v11a2 2 0 0 1 -2 2z",key:"svg-1"}],["path",{d:"M8 11h8v7h-8z",key:"svg-2"}],["path",{d:"M8 15h8",key:"svg-3"}],["path",{d:"M11 11v7",key:"svg-4"}]]);/**
 * @license @tabler/icons-react v3.21.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var tr=Ne("outline","upload","IconUpload",[["path",{d:"M4 17v2a2 2 0 0 0 2 2h12a2 2 0 0 0 2 -2v-2",key:"svg-0"}],["path",{d:"M7 9l5 -5l5 5",key:"svg-1"}],["path",{d:"M12 4l0 12",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.21.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var rr=Ne("outline","x","IconX",[["path",{d:"M18 6l-12 12",key:"svg-0"}],["path",{d:"M6 6l12 12",key:"svg-1"}]]);const or=new Map([["aac","audio/aac"],["abw","application/x-abiword"],["arc","application/x-freearc"],["avif","image/avif"],["avi","video/x-msvideo"],["azw","application/vnd.amazon.ebook"],["bin","application/octet-stream"],["bmp","image/bmp"],["bz","application/x-bzip"],["bz2","application/x-bzip2"],["cda","application/x-cdf"],["csh","application/x-csh"],["css","text/css"],["csv","text/csv"],["doc","application/msword"],["docx","application/vnd.openxmlformats-officedocument.wordprocessingml.document"],["eot","application/vnd.ms-fontobject"],["epub","application/epub+zip"],["gz","application/gzip"],["gif","image/gif"],["heic","image/heic"],["heif","image/heif"],["htm","text/html"],["html","text/html"],["ico","image/vnd.microsoft.icon"],["ics","text/calendar"],["jar","application/java-archive"],["jpeg","image/jpeg"],["jpg","image/jpeg"],["js","text/javascript"],["json","application/json"],["jsonld","application/ld+json"],["mid","audio/midi"],["midi","audio/midi"],["mjs","text/javascript"],["mp3","audio/mpeg"],["mp4","video/mp4"],["mpeg","video/mpeg"],["mpkg","application/vnd.apple.installer+xml"],["odp","application/vnd.oasis.opendocument.presentation"],["ods","application/vnd.oasis.opendocument.spreadsheet"],["odt","application/vnd.oasis.opendocument.text"],["oga","audio/ogg"],["ogv","video/ogg"],["ogx","application/ogg"],["opus","audio/opus"],["otf","font/otf"],["png","image/png"],["pdf","application/pdf"],["php","application/x-httpd-php"],["ppt","application/vnd.ms-powerpoint"],["pptx","application/vnd.openxmlformats-officedocument.presentationml.presentation"],["rar","application/vnd.rar"],["rtf","application/rtf"],["sh","application/x-sh"],["svg","image/svg+xml"],["swf","application/x-shockwave-flash"],["tar","application/x-tar"],["tif","image/tiff"],["tiff","image/tiff"],["ts","video/mp2t"],["ttf","font/ttf"],["txt","text/plain"],["vsd","application/vnd.visio"],["wav","audio/wav"],["weba","audio/webm"],["webm","video/webm"],["webp","image/webp"],["woff","font/woff"],["woff2","font/woff2"],["xhtml","application/xhtml+xml"],["xls","application/vnd.ms-excel"],["xlsx","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"],["xml","application/xml"],["xul","application/vnd.mozilla.xul+xml"],["zip","application/zip"],["7z","application/x-7z-compressed"],["mkv","video/x-matroska"],["mov","video/quicktime"],["msg","application/vnd.ms-outlook"]]);function fe(e,t){const r=nr(e);if(typeof r.path!="string"){const{webkitRelativePath:o}=e;Object.defineProperty(r,"path",{value:typeof t=="string"?t:typeof o=="string"&&o.length>0?o:e.name,writable:!1,configurable:!1,enumerable:!0})}return r}function nr(e){const{name:t}=e;if(t&&t.lastIndexOf(".")!==-1&&!e.type){const o=t.split(".").pop().toLowerCase(),i=or.get(o);i&&Object.defineProperty(e,"type",{value:i,writable:!1,configurable:!1,enumerable:!0})}return e}var ne=(e,t,r)=>new Promise((o,i)=>{var p=v=>{try{l(r.next(v))}catch(y){i(y)}},c=v=>{try{l(r.throw(v))}catch(y){i(y)}},l=v=>v.done?o(v.value):Promise.resolve(v.value).then(p,c);l((r=r.apply(e,t)).next())});const sr=[".DS_Store","Thumbs.db"];function ir(e){return ne(this,null,function*(){return Ae(e)&&ar(e.dataTransfer)?ur(e.dataTransfer,e.type):cr(e)?lr(e):Array.isArray(e)&&e.every(t=>"getFile"in t&&typeof t.getFile=="function")?pr(e):[]})}function ar(e){return Ae(e)}function cr(e){return Ae(e)&&Ae(e.target)}function Ae(e){return typeof e=="object"&&e!==null}function lr(e){return Be(e.target.files).map(t=>fe(t))}function pr(e){return ne(this,null,function*(){return(yield Promise.all(e.map(r=>r.getFile()))).map(r=>fe(r))})}function ur(e,t){return ne(this,null,function*(){if(e.items){const r=Be(e.items).filter(i=>i.kind==="file");if(t!=="drop")return r;const o=yield Promise.all(r.map(dr));return Ze(ut(o))}return Ze(Be(e.files).map(r=>fe(r)))})}function Ze(e){return e.filter(t=>sr.indexOf(t.name)===-1)}function Be(e){if(e===null)return[];const t=[];for(let r=0;r<e.length;r++){const o=e[r];t.push(o)}return t}function dr(e){if(typeof e.webkitGetAsEntry!="function")return Qe(e);const t=e.webkitGetAsEntry();return t&&t.isDirectory?dt(t):Qe(e)}function ut(e){return e.reduce((t,r)=>[...t,...Array.isArray(r)?ut(r):[r]],[])}function Qe(e){const t=e.getAsFile();if(!t)return Promise.reject(`${e} is not a File`);const r=fe(t);return Promise.resolve(r)}function fr(e){return ne(this,null,function*(){return e.isDirectory?dt(e):mr(e)})}function dt(e){const t=e.createReader();return new Promise((r,o)=>{const i=[];function p(){t.readEntries(c=>ne(this,null,function*(){if(c.length){const l=Promise.all(c.map(fr));i.push(l),p()}else try{const l=yield Promise.all(i);r(l)}catch(l){o(l)}}),c=>{o(c)})}p()})}function mr(e){return ne(this,null,function*(){return new Promise((t,r)=>{e.file(o=>{const i=fe(o,e.fullPath);t(i)},o=>{r(o)})})})}function gr(e,t){if(e&&t){const r=Array.isArray(t)?t:t.split(","),o=e.name||"",i=(e.type||"").toLowerCase(),p=i.replace(/\/.*$/,"");return r.some(c=>{const l=c.trim().toLowerCase();return l.charAt(0)==="."?o.toLowerCase().endsWith(l):l.endsWith("/*")?p===l.replace(/\/.*$/,""):i===l})}return!0}var hr=Object.defineProperty,yr=Object.defineProperties,vr=Object.getOwnPropertyDescriptors,Je=Object.getOwnPropertySymbols,xr=Object.prototype.hasOwnProperty,br=Object.prototype.propertyIsEnumerable,et=(e,t,r)=>t in e?hr(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,jr=(e,t)=>{for(var r in t||(t={}))xr.call(t,r)&&et(e,r,t[r]);if(Je)for(var r of Je(t))br.call(t,r)&&et(e,r,t[r]);return e},Dr=(e,t)=>yr(e,vr(t));const Er="file-invalid-type",wr="file-too-large",Pr="file-too-small",Fr="too-many-files",Ar=e=>{e=Array.isArray(e)&&e.length===1?e[0]:e;const t=Array.isArray(e)?`one of ${e.join(", ")}`:e;return{code:Er,message:`File type must be ${t}`}},tt=e=>({code:wr,message:`File is larger than ${e} ${e===1?"byte":"bytes"}`}),rt=e=>({code:Pr,message:`File is smaller than ${e} ${e===1?"byte":"bytes"}`}),Cr={code:Fr,message:"Too many files"};function ft(e,t){const r=e.type==="application/x-moz-file"||gr(e,t);return[r,r?null:Ar(t)]}function mt(e,t,r){if(J(e.size))if(J(t)&&J(r)){if(e.size>r)return[!1,tt(r)];if(e.size<t)return[!1,rt(t)]}else{if(J(t)&&e.size<t)return[!1,rt(t)];if(J(r)&&e.size>r)return[!1,tt(r)]}return[!0,null]}function J(e){return e!=null}function kr({files:e,accept:t,minSize:r,maxSize:o,multiple:i,maxFiles:p,validator:c}){return!i&&e.length>1||i&&p>=1&&e.length>p?!1:e.every(l=>{const[v]=ft(l,t),[y]=mt(l,r,o),D=c?c(l):null;return v&&y&&!D})}function Ce(e){return typeof e.isPropagationStopped=="function"?e.isPropagationStopped():typeof e.cancelBubble<"u"?e.cancelBubble:!1}function Ee(e){return e.dataTransfer?Array.prototype.some.call(e.dataTransfer.types,t=>t==="Files"||t==="application/x-moz-file"):!!e.target&&!!e.target.files}function ot(e){e.preventDefault()}function Or(e){return e.indexOf("MSIE")!==-1||e.indexOf("Trident/")!==-1}function _r(e){return e.indexOf("Edge/")!==-1}function Sr(e=window.navigator.userAgent){return Or(e)||_r(e)}function M(...e){return(t,...r)=>e.some(o=>(!Ce(t)&&o&&o(t,...r),Ce(t)))}function Ir(){return"showOpenFilePicker"in window}function zr(e){return J(e)?[{description:"Files",accept:Object.entries(e).filter(([r,o])=>{let i=!0;return gt(r)||(console.warn(`Skipped "${r}" because it is not a valid MIME type. Check https://developer.mozilla.org/en-US/docs/Web/HTTP/Basics_of_HTTP/MIME_types/Common_types for a list of valid MIME types.`),i=!1),(!Array.isArray(o)||!o.every(ht))&&(console.warn(`Skipped "${r}" because an invalid file extension was provided.`),i=!1),i}).reduce((r,[o,i])=>Dr(jr({},r),{[o]:i}),{})}]:e}function Tr(e){if(J(e))return Object.entries(e).reduce((t,[r,o])=>[...t,r,...o],[]).filter(t=>gt(t)||ht(t)).join(",")}function Rr(e){return e instanceof DOMException&&(e.name==="AbortError"||e.code===e.ABORT_ERR)}function Mr(e){return e instanceof DOMException&&(e.name==="SecurityError"||e.code===e.SECURITY_ERR)}function gt(e){return e==="audio/*"||e==="video/*"||e==="image/*"||e==="text/*"||/\w+\/[-+.\w]+/g.test(e)}function ht(e){return/^.*\.[\w]+$/.test(e)}var Lr=Object.defineProperty,Br=Object.defineProperties,$r=Object.getOwnPropertyDescriptors,ke=Object.getOwnPropertySymbols,yt=Object.prototype.hasOwnProperty,vt=Object.prototype.propertyIsEnumerable,nt=(e,t,r)=>t in e?Lr(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,C=(e,t)=>{for(var r in t||(t={}))yt.call(t,r)&&nt(e,r,t[r]);if(ke)for(var r of ke(t))vt.call(t,r)&&nt(e,r,t[r]);return e},q=(e,t)=>Br(e,$r(t)),Oe=(e,t)=>{var r={};for(var o in e)yt.call(e,o)&&t.indexOf(o)<0&&(r[o]=e[o]);if(e!=null&&ke)for(var o of ke(e))t.indexOf(o)<0&&vt.call(e,o)&&(r[o]=e[o]);return r};const Ge=a.forwardRef((e,t)=>{var r=e,{children:o}=r,i=Oe(r,["children"]);const p=bt(i),{open:c}=p,l=Oe(p,["open"]);return a.useImperativeHandle(t,()=>({open:c}),[c]),Pt.createElement(a.Fragment,null,o(q(C({},l),{open:c})))});Ge.displayName="Dropzone";const xt={disabled:!1,getFilesFromEvent:ir,maxSize:1/0,minSize:0,multiple:!0,maxFiles:0,preventDropOnDocument:!0,noClick:!1,noKeyboard:!1,noDrag:!1,noDragEventsBubbling:!1,validator:null,useFsAccessApi:!0,autoFocus:!1};Ge.defaultProps=xt;Ge.propTypes={children:f.func,accept:f.objectOf(f.arrayOf(f.string)),multiple:f.bool,preventDropOnDocument:f.bool,noClick:f.bool,noKeyboard:f.bool,noDrag:f.bool,noDragEventsBubbling:f.bool,minSize:f.number,maxSize:f.number,maxFiles:f.number,disabled:f.bool,getFilesFromEvent:f.func,onFileDialogCancel:f.func,onFileDialogOpen:f.func,useFsAccessApi:f.bool,autoFocus:f.bool,onDragEnter:f.func,onDragLeave:f.func,onDragOver:f.func,onDrop:f.func,onDropAccepted:f.func,onDropRejected:f.func,onError:f.func,validator:f.func};const $e={isFocused:!1,isFileDialogActive:!1,isDragActive:!1,isDragAccept:!1,isDragReject:!1,acceptedFiles:[],fileRejections:[]};function bt(e={}){const{accept:t,disabled:r,getFilesFromEvent:o,maxSize:i,minSize:p,multiple:c,maxFiles:l,onDragEnter:v,onDragLeave:y,onDragOver:D,onDrop:P,onDropAccepted:R,onDropRejected:F,onFileDialogCancel:m,onFileDialogOpen:x,useFsAccessApi:B,autoFocus:U,preventDropOnDocument:$,noClick:N,noKeyboard:z,noDrag:b,noDragEventsBubbling:O,onError:T,validator:_}=C(C({},xt),e),d=a.useMemo(()=>Tr(t),[t]),g=a.useMemo(()=>zr(t),[t]),h=a.useMemo(()=>typeof x=="function"?x:st,[x]),Y=a.useMemo(()=>typeof m=="function"?m:st,[m]),E=a.useRef(null),k=a.useRef(null),[me,A]=a.useReducer(Nr,$e),{isFocused:_e,isFileDialogActive:se}=me,ee=a.useRef(typeof window<"u"&&window.isSecureContext&&B&&Ir()),Se=()=>{!ee.current&&se&&setTimeout(()=>{if(k.current){const{files:s}=k.current;s.length||(A({type:"closeDialog"}),Y())}},300)};a.useEffect(()=>(window.addEventListener("focus",Se,!1),()=>{window.removeEventListener("focus",Se,!1)}),[k,se,Y,ee]);const X=a.useRef([]),ge=s=>{E.current&&E.current.contains(s.target)||(s.preventDefault(),X.current=[])};a.useEffect(()=>($&&(document.addEventListener("dragover",ot,!1),document.addEventListener("drop",ge,!1)),()=>{$&&(document.removeEventListener("dragover",ot),document.removeEventListener("drop",ge))}),[E,$]),a.useEffect(()=>(!r&&U&&E.current&&E.current.focus(),()=>{}),[E,U,r]);const K=a.useCallback(s=>{T?T(s):console.error(s)},[T]),he=a.useCallback(s=>{s.preventDefault(),s.persist(),je(s),X.current=[...X.current,s.target],Ee(s)&&Promise.resolve(o(s)).then(u=>{if(Ce(s)&&!O)return;const j=u.length,w=j>0&&kr({files:u,accept:d,minSize:p,maxSize:i,multiple:c,maxFiles:l,validator:_}),S=j>0&&!w;A({isDragAccept:w,isDragReject:S,isDragActive:!0,type:"setDraggedFiles"}),v&&v(s)}).catch(u=>K(u))},[o,v,K,O,d,p,i,c,l,_]),ye=a.useCallback(s=>{s.preventDefault(),s.persist(),je(s);const u=Ee(s);if(u&&s.dataTransfer)try{s.dataTransfer.dropEffect="copy"}catch{}return u&&D&&D(s),!1},[D,O]),ve=a.useCallback(s=>{s.preventDefault(),s.persist(),je(s);const u=X.current.filter(w=>E.current&&E.current.contains(w)),j=u.indexOf(s.target);j!==-1&&u.splice(j,1),X.current=u,!(u.length>0)&&(A({type:"setDraggedFiles",isDragActive:!1,isDragAccept:!1,isDragReject:!1}),Ee(s)&&y&&y(s))},[E,y,O]),Z=a.useCallback((s,u)=>{const j=[],w=[];s.forEach(S=>{const[ce,le]=ft(S,d),[Ie,ze]=mt(S,p,i),pe=_?_(S):null;if(ce&&Ie&&!pe)j.push(S);else{let ue=[le,ze];pe&&(ue=ue.concat(pe)),w.push({file:S,errors:ue.filter(Te=>Te)})}}),(!c&&j.length>1||c&&l>=1&&j.length>l)&&(j.forEach(S=>{w.push({file:S,errors:[Cr]})}),j.splice(0)),A({acceptedFiles:j,fileRejections:w,type:"setFiles"}),P&&P(j,w,u),w.length>0&&F&&F(w,u),j.length>0&&R&&R(j,u)},[A,c,d,p,i,l,P,R,F,_]),te=a.useCallback(s=>{s.preventDefault(),s.persist(),je(s),X.current=[],Ee(s)&&Promise.resolve(o(s)).then(u=>{Ce(s)&&!O||Z(u,s)}).catch(u=>K(u)),A({type:"reset"})},[o,Z,K,O]),G=a.useCallback(()=>{if(ee.current){A({type:"openDialog"}),h();const s={multiple:c,types:g};window.showOpenFilePicker(s).then(u=>o(u)).then(u=>{Z(u,null),A({type:"closeDialog"})}).catch(u=>{Rr(u)?(Y(u),A({type:"closeDialog"})):Mr(u)?(ee.current=!1,k.current?(k.current.value=null,k.current.click()):K(new Error("Cannot open the file picker because the https://developer.mozilla.org/en-US/docs/Web/API/File_System_Access_API is not supported and no <input> was provided."))):K(u)});return}k.current&&(A({type:"openDialog"}),h(),k.current.value=null,k.current.click())},[A,h,Y,B,Z,K,g,c]),re=a.useCallback(s=>{!E.current||!E.current.isEqualNode(s.target)||(s.key===" "||s.key==="Enter"||s.keyCode===32||s.keyCode===13)&&(s.preventDefault(),G())},[E,G]),oe=a.useCallback(()=>{A({type:"focus"})},[]),xe=a.useCallback(()=>{A({type:"blur"})},[]),ie=a.useCallback(()=>{N||(Sr()?setTimeout(G,0):G())},[N,G]),H=s=>r?null:s,ae=s=>z?null:H(s),be=s=>b?null:H(s),je=s=>{O&&s.stopPropagation()},jt=a.useMemo(()=>(s={})=>{var u=s,{refKey:j="ref",role:w,onKeyDown:S,onFocus:ce,onBlur:le,onClick:Ie,onDragEnter:ze,onDragOver:pe,onDragLeave:ue,onDrop:Te}=u,wt=Oe(u,["refKey","role","onKeyDown","onFocus","onBlur","onClick","onDragEnter","onDragOver","onDragLeave","onDrop"]);return C(C({onKeyDown:ae(M(S,re)),onFocus:ae(M(ce,oe)),onBlur:ae(M(le,xe)),onClick:H(M(Ie,ie)),onDragEnter:be(M(ze,he)),onDragOver:be(M(pe,ye)),onDragLeave:be(M(ue,ve)),onDrop:be(M(Te,te)),role:typeof w=="string"&&w!==""?w:"presentation",[j]:E},!r&&!z?{tabIndex:0}:{}),wt)},[E,re,oe,xe,ie,he,ye,ve,te,z,b,r]),Dt=a.useCallback(s=>{s.stopPropagation()},[]),Et=a.useMemo(()=>(s={})=>{var u=s,{refKey:j="ref",onChange:w,onClick:S}=u,ce=Oe(u,["refKey","onChange","onClick"]);const le={accept:d,multiple:c,type:"file",style:{display:"none"},onChange:H(M(w,te)),onClick:H(M(S,Dt)),tabIndex:-1,[j]:k};return C(C({},le),ce)},[k,t,c,te,r]);return q(C({},me),{isFocused:_e&&!r,getRootProps:jt,getInputProps:Et,rootRef:E,inputRef:k,open:H(G)})}function Nr(e,t){switch(t.type){case"focus":return q(C({},e),{isFocused:!0});case"blur":return q(C({},e),{isFocused:!1});case"openDialog":return q(C({},$e),{isFileDialogActive:!0});case"closeDialog":return q(C({},e),{isFileDialogActive:!1});case"setDraggedFiles":return q(C({},e),{isDragActive:t.isDragActive,isDragAccept:t.isDragAccept,isDragReject:t.isDragReject});case"setFiles":return q(C({},e),{acceptedFiles:t.acceptedFiles,fileRejections:t.fileRejections});case"reset":return C({},$e);default:return e}}function st(){}const[Kr,Ur]=Ft("Dropzone component was not found in tree");function He(e){const t=r=>{const{children:o,...i}=Ke(`Dropzone${Xe(e)}`,{},r),p=Ur(),c=At(o)?o:n.jsx("span",{children:o});return p[e]?a.cloneElement(c,i):null};return t.displayName=`@mantine/dropzone/${Xe(e)}`,t}const Yr=He("accept"),Gr=He("reject"),Hr=He("idle");var de={root:"m_d46a4834",inner:"m_b85f7144",fullScreen:"m_96f6e9ad",dropzone:"m_7946116d"};const Wr={loading:!1,multiple:!0,maxSize:1/0,autoFocus:!1,activateOnClick:!0,activateOnDrag:!0,dragEventsBubbling:!0,activateOnKeyboard:!0,useFsAccessApi:!0,variant:"light",rejectColor:"red"},qr=kt((e,{radius:t,variant:r,acceptColor:o,rejectColor:i})=>{const p=e.variantColorResolver({color:o||e.primaryColor,theme:e,variant:r}),c=e.variantColorResolver({color:i||"red",theme:e,variant:r});return{root:{"--dropzone-radius":Ot(t),"--dropzone-accept-color":p.color,"--dropzone-accept-bg":p.background,"--dropzone-reject-color":c.color,"--dropzone-reject-bg":c.background}}}),V=lt((e,t)=>{const r=Ke("Dropzone",Wr,e),{classNames:o,className:i,style:p,styles:c,unstyled:l,vars:v,radius:y,disabled:D,loading:P,multiple:R,maxSize:F,accept:m,children:x,onDropAny:B,onDrop:U,onReject:$,openRef:N,name:z,maxFiles:b,autoFocus:O,activateOnClick:T,activateOnDrag:_,dragEventsBubbling:d,activateOnKeyboard:g,onDragEnter:h,onDragLeave:Y,onDragOver:E,onFileDialogCancel:k,onFileDialogOpen:me,preventDropOnDocument:A,useFsAccessApi:_e,getFilesFromEvent:se,validator:ee,rejectColor:Se,acceptColor:X,enablePointerEvents:ge,loaderProps:K,inputProps:he,mod:ye,...ve}=r,Z=pt({name:"Dropzone",classes:de,props:r,className:i,style:p,classNames:o,styles:c,unstyled:l,vars:v,varsResolver:qr}),{getRootProps:te,getInputProps:G,isDragAccept:re,isDragReject:oe,open:xe}=bt({onDrop:B,onDropAccepted:U,onDropRejected:$,disabled:D||P,accept:Array.isArray(m)?m.reduce((H,ae)=>({...H,[ae]:[]}),{}):m,multiple:R,maxSize:F,maxFiles:b,autoFocus:O,noClick:!T,noDrag:!_,noDragEventsBubbling:!d,noKeyboard:!g,onDragEnter:h,onDragLeave:Y,onDragOver:E,onFileDialogCancel:k,onFileDialogOpen:me,preventDropOnDocument:A,useFsAccessApi:_e,validator:ee,...se?{getFilesFromEvent:se}:null});Ct(N,xe);const ie=!re&&!oe;return n.jsx(Kr,{value:{accept:re,reject:oe,idle:ie},children:n.jsxs(Ue,{...te(),...Z("root",{focusable:!0}),...ve,mod:[{accept:re,reject:oe,idle:ie,disabled:D,loading:P,"activate-on-click":T},ye],children:[n.jsx(Yt,{visible:P,overlayProps:{radius:y},unstyled:l,loaderProps:K}),n.jsx("input",{...G(he),name:z}),n.jsx("div",{...Z("inner"),ref:t,"data-enable-pointer-events":ge||void 0,children:x})]})})});V.classes=de;V.displayName="@mantine/dropzone/Dropzone";V.Accept=Yr;V.Idle=Hr;V.Reject=Gr;const Vr={loading:!1,maxSize:1/0,activateOnClick:!1,activateOnDrag:!0,dragEventsBubbling:!0,activateOnKeyboard:!0,active:!0,zIndex:_t("max"),withinPortal:!0},We=lt((e,t)=>{const r=Ke("DropzoneFullScreen",Vr,e),{classNames:o,className:i,style:p,styles:c,unstyled:l,vars:v,active:y,onDrop:D,onReject:P,zIndex:R,withinPortal:F,portalProps:m,...x}=r,B=pt({name:"DropzoneFullScreen",classes:de,props:r,className:i,style:p,classNames:o,styles:c,unstyled:l,rootSelector:"fullScreen"}),{resolvedClassNames:U,resolvedStyles:$}=St({classNames:o,styles:c,props:r}),[N,z]=a.useState(0),[b,{open:O,close:T}]=Le(!1),_=g=>{var h;(h=g.dataTransfer)!=null&&h.types.includes("Files")&&(z(Y=>Y+1),O())},d=()=>{z(g=>g-1)};return a.useEffect(()=>{N===0&&T()},[N]),a.useEffect(()=>{if(y)return document.addEventListener("dragenter",_,!1),document.addEventListener("dragleave",d,!1),()=>{document.removeEventListener("dragenter",_,!1),document.removeEventListener("dragleave",d,!1)}},[y]),n.jsx(It,{...m,withinPortal:F,children:n.jsx(Ue,{...B("fullScreen",{style:{opacity:b?1:0,pointerEvents:b?"all":"none",zIndex:R}}),ref:t,children:n.jsx(V,{...x,classNames:U,styles:$,unstyled:l,className:de.dropzone,onDrop:g=>{D==null||D(g),T(),z(0)},onReject:g=>{P==null||P(g),T(),z(0)}})})})});We.classes=de;We.displayName="@mantine/dropzone/DropzoneFullScreen";const it={png:"image/png",gif:"image/gif",jpeg:"image/jpeg",svg:"image/svg+xml",webp:"image/webp",avif:"image/avif",heic:"image/heic",heif:"image/heif",mp4:"video/mp4",zip:"application/zip",rar:"application/x-rar","7z":"application/x-7z-compressed",csv:"text/csv",pdf:"application/pdf",doc:"application/msword",docx:"application/vnd.openxmlformats-officedocument.wordprocessingml.document",xls:"application/vnd.ms-excel",xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",ppt:"application/vnd.ms-powerpoint",pptx:"application/vnd.openxmlformats-officedocument.presentationml.presentation",exe:"application/vnd.microsoft.portable-executable"},Xr=[it.xls,it.xlsx];V.FullScreen=We;const we=V,Zr="_th_1w9xk_1",Qr="_control_1w9xk_5",Jr="_icon_1w9xk_17",Re={th:Zr,control:Qr,icon:Jr};function Me({children:e,reversed:t,sorted:r,onSort:o}){const i=r?t?Qt:Jt:Ht;return n.jsx(I.Th,{className:Re.th,children:n.jsx(Rt,{onClick:o,className:Re.control,children:n.jsxs(Ye,{justify:"space-between",children:[n.jsx(Q,{fw:500,fz:"sm",children:e}),o?n.jsx(Gt,{className:Re.icon,children:n.jsx(i,{style:{width:L(16),height:L(16)},stroke:1.5})}):n.jsx(n.Fragment,{})]})})})}function at(e,t){const r=t.toLowerCase().trim(),o=["groupName","title","description"];return e.filter(i=>o.some(p=>i[p].toLowerCase().includes(r)))}function ct(e,t){const{sortBy:r}=t;return at(r?[...e].sort((o,i)=>t.reversed?i[r].localeCompare(o[r]):o[r].localeCompare(i[r])):e,t.search)}function eo({data:e,onEdit:t,onDelete:r}){const[o,i]=a.useState(""),[p,c]=a.useState(e),[l,v]=a.useState(null),[y,D]=a.useState(!1),P=m=>{const x=m===l?!y:!1;D(x),v(m),c(ct(e??[],{sortBy:m,reversed:x,search:o}))},R=m=>{const{value:x}=m.currentTarget;i(x),c(ct(e??[],{sortBy:l,reversed:y,search:x}))},F=p==null?void 0:p.map(m=>n.jsxs(I.Tr,{children:[n.jsx(I.Td,{children:m.groupName}),n.jsx(I.Td,{children:m.title}),n.jsx(I.Td,{children:m.description}),n.jsx(I.Td,{children:n.jsxs(Ye,{gap:"sm",children:[n.jsx(Pe,{size:"xs",variant:"light",color:"blue",onClick:()=>t==null?void 0:t(m),children:"Edit"}),n.jsx(Xt,{variant:"light",color:"red",onClick:()=>r==null?void 0:r(m),children:n.jsx(qt,{})})]})})]},m.id));return a.useEffect(()=>{c(e)},[e]),n.jsxs(zt,{children:[n.jsx(Fe,{placeholder:"Search by any field",mb:"md",leftSection:n.jsx(Zt,{style:{width:L(16),height:L(16)},stroke:1.5}),value:o,onChange:R}),n.jsx(Tt,{children:n.jsxs(I,{horizontalSpacing:"md",verticalSpacing:"xs",layout:"fixed",children:[n.jsx(I.Tbody,{children:n.jsxs(I.Tr,{children:[n.jsx(Me,{sorted:l==="groupName",reversed:y,onSort:()=>P("groupName"),children:"Group Name"}),n.jsx(Me,{sorted:l==="title",reversed:y,onSort:()=>P("title"),children:"Project Title"}),n.jsx(Me,{children:"Description"}),n.jsx(I.Th,{w:200,children:"Action"})]})}),n.jsx(I.Tbody,{children:F!=null&&F.length?F:n.jsx(I.Tr,{children:n.jsx(I.Td,{colSpan:3,children:n.jsx(Q,{fw:500,ta:"center",children:"Nothing found"})})})})]})})]})}function to(e,t=2){if(!+e)return"0 Bytes";const r=1024,o=t<0?0:t,i=["Bytes","KiB","MiB","GiB","TiB","PiB","EiB","ZiB","YiB"],p=Math.floor(Math.log(e)/Math.log(r));return`${parseFloat((e/Math.pow(r,p)).toFixed(o))} ${i[p]}`}function co(){var _;const{semesterId:e}=Mt(),{data:t,isLoading:r,isFetching:o,refetch:i}=Lt(e,{skip:!e,refetchOnMountOrArgChange:!0}),[p,{open:c,close:l}]=Le(!1),[v,{open:y,close:D}]=Le(!1),[P,{isLoading:R}]=Bt(),[F,m]=a.useState(!1),[x,B]=a.useState(null),[U,{isLoading:$}]=$t(),[N,{isLoading:z}]=Nt(),b=Kt({mode:"controlled",initialValues:{id:null,groupName:"",title:"",description:"",client:""}}),O=async d=>{var g;try{d!=null&&d.id?(await U({...d,id:d.id.toString()}).unwrap(),W.show({title:"Success",message:"Project updated successfully",color:"green"})):(await P({id:e,body:[Vt.omit(d,"id")]}).unwrap(),W.show({title:"Success",message:"Project added successfully",color:"green"})),i()}catch(h){W.show({title:"Error",message:((g=h==null?void 0:h.data)==null?void 0:g.message)??"",color:"red"})}finally{b.reset(),l()}},T=async()=>{var g;console.log("file",x);const d=new FormData;d.append("file",x);try{m(!0),await fetch(`https://nhatphi-nginx.io.vn:9000/api/projects/import/${e}`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,ContentType:"multipart/form-data"},body:d,method:"POST"}),W.show({title:"Success",message:"Projects added successfully",color:"green"}),i()}catch(h){W.show({title:"Error",message:((g=h==null?void 0:h.data)==null?void 0:g.message)??"",color:"red"})}finally{m(!1),B(null),D()}};return n.jsxs(Wt,{title:"All Projects",loadingOverlay:r||o,action:{label:"Add Project",onClick:c},action2:{label:"Import Projects",onClick:y},children:[n.jsx(eo,{data:t,onEdit:d=>{b.setValues(d),c()},onDelete:d=>{qe.open({size:"sm",title:"Delete project",children:n.jsxs(n.Fragment,{children:[n.jsxs(Q,{size:"sm",children:["Are you sure you want to delete project ",n.jsx("b",{children:d.title}),"?"]}),n.jsx(Ue,{ta:"end",mt:"lg",children:n.jsx(Pe,{ta:"center",loading:z,color:"red",onClick:async()=>{var g;try{await N({id:d.id.toString()}).unwrap(),W.show({title:"Success",message:"Project deleted successfully",color:"red"}),i()}catch(h){W.show({title:"Error",message:((g=h==null?void 0:h.data)==null?void 0:g.message)??"",color:"red"})}finally{qe.closeAll()}},children:"Delete"})})]})})}}),n.jsx(Ve,{opened:p,onClose:l,title:(_=b.values)!=null&&_.id?"Edit project":"Add project",size:"lg",children:n.jsx("form",{onSubmit:b.onSubmit(O),children:n.jsxs(De,{direction:"column",gap:"sm",children:[a.createElement(Fe,{...b.getInputProps("groupName"),label:"Group Name",withAsterisk:!0,key:b.key("groupName"),required:!0}),a.createElement(Fe,{...b.getInputProps("title"),label:"Project Title",withAsterisk:!0,key:b.key("title"),required:!0}),a.createElement(Ut,{...b.getInputProps("description"),label:"Description",withAsterisk:!0,key:b.key("description"),required:!0}),a.createElement(Fe,{...b.getInputProps("client"),label:"Client",key:b.key("client")}),n.jsx(Pe,{type:"submit",size:"md",mt:"md",loading:R||$,children:"Submit"})]})})}),n.jsxs(Ve,{opened:v,onClose:()=>{D()},title:"Import projects",size:"lg",children:[n.jsx(we,{onDrop:d=>B(d[0]),onReject:d=>{var g,h;return W.show({title:"Error",message:`File ${(h=(g=d[0])==null?void 0:g.file)==null?void 0:h.name} is not a valid excel file or exceeds the size limit`,color:"red"})},maxSize:20*1024**2,accept:Xr,disabled:F,children:n.jsxs(Ye,{justify:"center",gap:"xl",mih:220,style:{pointerEvents:"none"},children:[n.jsx(we.Accept,{children:n.jsx(tr,{style:{width:L(52),height:L(52),color:"var(--mantine-color-blue-6)"},stroke:1.5})}),n.jsx(we.Reject,{children:n.jsx(rr,{style:{width:L(52),height:L(52),color:"var(--mantine-color-red-6)"},stroke:1.5})}),n.jsx(we.Idle,{children:n.jsx(er,{style:{width:L(52),height:L(52),color:x?"var(--mantine-color-blue-4)":"var(--mantine-color-dimmed)"},stroke:1.5})}),x?n.jsxs(De,{direction:"column",align:"center",children:[n.jsxs(De,{direction:"column",align:"center",children:[n.jsx(Q,{size:"lg",c:"blue",children:x.name}),n.jsx("div",{children:to(x.size)})]}),n.jsx(Q,{size:"xs",fs:"italic",children:"*You can drag and drop or click again to upload a new file"})]}):n.jsxs("div",{children:[n.jsx(Q,{size:"xl",inline:!0,children:"Drag a file (.xlsx) here or click to select files"}),n.jsx(Q,{size:"sm",c:"dimmed",inline:!0,mt:7,children:"Attached file should not exceed 20mb"})]})]})}),n.jsx(De,{justify:"center",mt:"md",children:n.jsx(Pe,{size:"lg",onClick:T,loading:F,children:"Submit"})})]})]})}export{co as default};
